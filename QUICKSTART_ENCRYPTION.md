# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üöÄ –ó–∞ 5 –º–∏–Ω—É—Ç

### –®–∞–≥ 1: –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è (1 –º–∏–Ω)

```bash
# MySQL
mysqldump -u user -p mvp_db > backup_$(date +%Y%m%d).sql

# Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
redis-cli SAVE
cp /var/lib/redis/dump.rdb backup_redis_$(date +%Y%m%d).rdb
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ –ë–î (1 –º–∏–Ω)

```bash
mysql -u user -p mvp_db < migration_add_encrypted_fields.sql
```

–ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä - –ø–æ–ª—è –¥–æ–±–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
```bash
python main.py
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (1 –º–∏–Ω)

```bash
python migrate_encrypt_data.py --dry-run
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ - —á—Ç–æ –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ.

### –®–∞–≥ 4: –†–µ–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (1 –º–∏–Ω)

```bash
python migrate_encrypt_data.py
```

–í–≤–µ–¥–∏—Ç–µ `yes` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ (1 –º–∏–Ω)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
cat migration_encrypt.log | grep "–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î
mysql -u user -p mvp_db -e "SELECT unique_id, encrypted_avatar_mime FROM users LIMIT 1;"

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (base64 —Å—Ç—Ä–æ–∫–∏)
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã.

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è "–°–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–∞—Å!" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!** üîê

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [ENCRYPTION_IMPLEMENTATION.md](ENCRYPTION_IMPLEMENTATION.md)
- **–ê–Ω–∞–ª–∏–∑:** [ENCRYPTION_ANALYSIS.md](ENCRYPTION_ANALYSIS.md)
- **–†–µ–∑—é–º–µ:** [ENCRYPTION_SUMMARY.md](ENCRYPTION_SUMMARY.md)

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ù–µ —É–¥–∞–ª—è–π—Ç–µ** `ENCRYPTION_KEY_STR` –∏–∑ `.env`
2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ** —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
4. **–û–±–Ω–æ–≤–∏—Ç–µ** –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é)

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (–∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏)
mysql -u user -p mvp_db < backup_YYYYMMDD.sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
python -c "import os; from dotenv import load_dotenv; load_dotenv(); print('OK' if os.getenv('ENCRYPTION_KEY_STR') else 'ERROR')"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f migration_encrypt.log
tail -f mvp_server.log
```
