# MVP Server - Melo Voice Project

**–í–µ—Ä—Å–∏—è:** 3.2.0  
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Pixeltoo Lab  
**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** "–°–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–∞—Å!" üîê

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–ó–∞—â–∏—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ –∑–≤–æ–Ω–∫–∞–º–∏, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π:
- **E2E —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- **–ü–æ–ª–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö PII –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (AES-256-GCM)
- **WebRTC** –¥–ª—è P2P –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
- **WebSocket** –¥–ª—è real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **Zero-knowledge** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ E2E —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (RSA + AES)
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö PII –≤ –ë–î (AES-256-GCM)
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (RS256)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π
- ‚úÖ Rate limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- ‚úÖ SSL/TLS (Let's Encrypt)

### üí¨ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- ‚úÖ –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (DM)
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã
- ‚úÖ –ö–∞–Ω–∞–ª—ã (–ø—É–±–ª–∏—á–Ω—ã–µ/–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ)
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ—á—Ç–µ–Ω–∏—è
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—á–∞—Ç–∏
- ‚úÖ –û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç–∞–≤–∫–∞

### üìû –ì–æ–ª–æ—Å–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏
- ‚úÖ P2P –∑–≤–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ WebRTC
- ‚úÖ ICE/STUN/TURN —Å–µ—Ä–≤–µ—Ä—ã
- ‚úÖ –°–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ 8-–∑–Ω–∞—á–Ω—ã–µ ID
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã)
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã (online/offline/away)

### üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –ú—É–ª—å—Ç–∏—Å–µ—Å—Å–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- ‚úÖ Auto-login –ø–æ device token
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Web Push)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ           ‚îÇ
‚îÇ    (Flutter: iOS, Android, Web)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                   ‚îÇ
        ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   HTTPS API  ‚îÇ    ‚îÇ  WebSocket   ‚îÇ
‚îÇ   Port 8088  ‚îÇ    ‚îÇ  Port 8089   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                   ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   FastAPI App   ‚îÇ
        ‚îÇ   main.py       ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                 ‚îÇ
        ‚ñº                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    MySQL     ‚îÇ  ‚îÇ    Redis     ‚îÇ
‚îÇ  (AES-256)   ‚îÇ  ‚îÇ  (AES-256)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **OS:** Linux (Ubuntu 20.04+) –∏–ª–∏ Windows
- **Python:** 3.9+
- **MySQL:** 8.0+
- **Redis:** 6.0+
- **SSL:** –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt

### Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
fastapi>=0.104.0
uvicorn[standard]>=0.24.0
sqlalchemy>=2.0.0
asyncpg
aiomysql
redis>=5.0.0
bcrypt
PyJWT
cryptography
python-dotenv
apscheduler
websockets
pywebpush
tenacity
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/pixeltooru/mvp.git
cd mvp
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
# Database
DB_URL=mysql+aiomysql://user:password@localhost/mvp_db

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password

# Encryption
ENCRYPTION_KEY_STR=your_base64_encoded_32_byte_key

# JWT
JWT_PRIVATE_KEY_PATH=/var/mvp/jwt_private.pem
JWT_PUBLIC_KEY_PATH=/var/mvp/jwt_public.pem
JWT_ALGORITHM=RS256
JWT_ISSUER=pixeltoo.ru
JWT_AUDIENCE=mvp_clients
ACCESS_TOKEN_EXPIRE_MINUTES=120

# App
APP_SECRET_KEY=your_secret_key_min_32_chars
DEBUG_MODE=0
LOG_FILE_PATH=/var/mvp/mvp_server.log

# VAPID (–¥–ª—è Web Push)
VAPID_PRIVATE_KEY=your_vapid_private_key
VAPID_PUBLIC_KEY=your_vapid_public_key
VAPID_SUBJECT=mailto:your@email.com
```

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

```bash
# Encryption key
python -c "import secrets, base64; print(base64.urlsafe_b64encode(secrets.token_bytes(32)).decode())"

# JWT keys (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

# VAPID keys
python -c "from pywebpush import webpush; print(webpush.generate_vapid_keys())"
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ë–î

```bash
mysql -u root -p
CREATE DATABASE mvp_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'mvp_user'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON mvp_db.* TO 'mvp_user'@'localhost';
FLUSH PRIVILEGES;
```

### 6. –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î

```bash
# –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
# –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é:
mysql -u mvp_user -p mvp_db < migration_add_encrypted_fields.sql
```

### 7. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞:
- **HTTPS API:** https://localhost:8088
- **WebSocket:** wss://localhost:8089

---

## üîê –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è: "–°–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–∞—Å!"

**95% –¥–∞–Ω–Ω—ã—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ:**

#### MySQL (AES-256-GCM):
- –¢–µ–ª–µ—Ñ–æ–Ω—ã, –∏–º–µ–Ω–∞, –Ω–∏–∫–Ω–µ–π–º—ã
- IP –∞–¥—Ä–µ—Å–∞, User-Agent
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ù–∞–∑–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤, –∫–æ–¥—ã –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- E2E –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏

#### Redis (AES-256-GCM):
- CSRF —Ç–æ–∫–µ–Ω—ã
- Device —Ç–æ–∫–µ–Ω—ã
- Push –ø–æ–¥–ø–∏—Å–∫–∏

#### E2E (–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ):
- –°–æ–æ–±—â–µ–Ω–∏—è (RSA + AES)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏

### –ú–∏–≥—Ä–∞—Ü–∏—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python migrate_encrypt_data.py --dry-run

# –†–µ–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
python migrate_encrypt_data.py
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [README_ENCRYPTION.md](README_ENCRYPTION.md)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–∞—è:
- **README.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª
- **–ü–†–û–ï–ö–¢_–ì–û–¢–û–í.md** - –û–ø–∏—Å–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- **API_SESSIONS_STATUS.md** - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:
- **README_ENCRYPTION.md** - –û–±–∑–æ—Ä —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **QUICKSTART_ENCRYPTION.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **ENCRYPTION_SUMMARY.md** - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
- **ENCRYPTION_ANALYSIS.md** - –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- **ENCRYPTION_IMPLEMENTATION.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é
- **CHANGELOG_ENCRYPTION.md** - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Changelog:
- **CHANGELOG_SESSIONS_STATUS.md** - –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π
- **SERVER_SESSION_FIX.md** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π

---

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
mvp/
‚îú‚îÄ‚îÄ main.py                          # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt                 # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                     # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore                       # Git ignore
‚îÇ
‚îú‚îÄ‚îÄ app/                             # –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ auth.py                      # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ db.py                        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models.py                    # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ push.py                      # Web Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ encryption.py                # –£—Ç–∏–ª–∏—Ç—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ redis_encrypted.py           # Redis —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ routes/                      # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ sessions.py              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ devices.py               # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ chats.py                 # –ß–∞—Ç—ã –∏ –∫–∞–Ω–∞–ª—ã
‚îÇ       ‚îú‚îÄ‚îÄ chat_messages.py         # –°–æ–æ–±—â–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ chat_members.py          # –£—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ avatars.py               # –ê–≤–∞—Ç–∞—Ä—ã
‚îÇ       ‚îú‚îÄ‚îÄ invites.py               # –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ message_mgmt.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ user_status.py           # –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ       ‚îî‚îÄ‚îÄ scheduler.py             # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
‚îÇ
‚îú‚îÄ‚îÄ migration_add_encrypted_fields.sql  # SQL –º–∏–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ migrate_encrypt_data.py             # Python –º–∏–≥—Ä–∞—Ü–∏—è
‚îÇ
‚îî‚îÄ‚îÄ docs/                            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ README_ENCRYPTION.md
    ‚îú‚îÄ‚îÄ ENCRYPTION_ANALYSIS.md
    ‚îî‚îÄ‚îÄ ...
```

---

## üîå API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /login` - –í—Ö–æ–¥
- `GET /public_key` - –ü—É–±–ª–∏—á–Ω—ã–π JWT –∫–ª—é—á
- `GET /csrf_token` - CSRF —Ç–æ–∫–µ–Ω

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /profile` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `POST /subscribe` - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /confirm_subscribe` - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `GET /contacts` - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### –°–æ–æ–±—â–µ–Ω–∏—è
- `POST /messages/send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- `GET /messages/history/dm/{target_id}` - –ò—Å—Ç–æ—Ä–∏—è DM
- `GET /messages/history/chat/{chat_id}` - –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞

### –ß–∞—Ç—ã
- `POST /chats/create` - –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–∞
- `GET /chats/list` - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
- `POST /chats/set_public` - –°–¥–µ–ª–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–º
- `GET /chats/by_invite/{code}` - –ß–∞—Ç –ø–æ –∫–æ–¥—É

### –°–µ—Å—Å–∏–∏
- `GET /sessions` - –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π
- `DELETE /sessions/{session_id}` - –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `POST /sessions/terminate_all` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏

### WebSocket
- `WS /ws` - WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [API_SESSIONS_STATUS.md](API_SESSIONS_STATUS.md)

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:

1. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
   - AES-256-GCM –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
   - E2E —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
   - TLS/SSL –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - JWT —Å RS256
   - CSRF –∑–∞—â–∏—Ç–∞
   - Device tokens –¥–ª—è auto-login

3. **Rate Limiting:**
   - 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 120 —Å–µ–∫—É–Ω–¥
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
   - WebSocket: 100 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É

4. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫:**
   - SQL injection (SQLAlchemy ORM)
   - XSS (–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
   - CSRF (—Ç–æ–∫–µ–Ω—ã)
   - DDoS (rate limiting)

5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ sensitive –¥–∞–Ω–Ω—ã—Ö
   - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (10 MB)
   - Audit trail

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:** <1% –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **WebSocket:** 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **API:** 1000+ –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—è—Ö

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–º. [GitHub Issues](https://github.com/pixeltooru/mvp/issues)

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–æ–µ–∫—Ç –≤ —Å—Ç–∞–¥–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!

### –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥:

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - Pixeltoo Lab

---

## üë• –ê–≤—Ç–æ—Ä—ã

- **Pixeltoo Lab** - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub:** [@pixeltooru](https://github.com/pixeltooru)
- **Email:** support@pixeltoo.ru
- **Website:** https://pixeltoo.ru

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- FastAPI –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- SQLAlchemy –∑–∞ –º–æ—â–Ω—ã–π ORM
- Cryptography –∑–∞ –Ω–∞–¥–µ–∂–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- –°–æ–æ–±—â–µ—Å—Ç–≤—É open-source

---

## üîÑ –í–µ—Ä—Å–∏–∏

### v3.2.0 (2025-10-20)
- ‚úÖ –ü–æ–ª–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (95% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ –ú–æ–¥—É–ª—å encryption.py
- ‚úÖ Redis —Å –∞–≤—Ç–æ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### v3.1.1
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–µ—á–∞—Ç–∏

### v3.0.0
- ‚úÖ E2E —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ WebRTC –∑–≤–æ–Ω–∫–∏
- ‚úÖ –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã

–°–º. –ø–æ–ª–Ω—ã–π [CHANGELOG](CHANGELOG_SESSIONS_STATUS.md)

---

**üîê –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!**

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è: "–°–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –≤–∞—Å!" - –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê ‚úÖ**
